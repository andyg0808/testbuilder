source "./testing.tcl"
file delete complex_test.py
spawn python3 ./run.py --no-color --unroll-depth=20 --lines=2,8,12 complex.py

expect -re {expected.*\{.*: ([-\d]+), .*: (\d+)\}}
set value [expr $expect_out(1,string) * $expect_out(2,string)]
send -- "$value\n"
expect "Couldn't generate a test for line 8"
expect expected
send "None\n"
system pytest complex_test.py
file delete complex_test.py
